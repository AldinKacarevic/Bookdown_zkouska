[["index.html", "Projekt VAL4PLAN 1 O projektu 1.1 Pro VAL4PLAN? 1.2 Cíl projektu 1.3 Pouitá data", " Projekt VAL4PLAN Aldin Kacarevic and the VAL4PLAN team 2022-10-04 1 O projektu 1.1 Pro VAL4PLAN? dorem dorem ipsum ipsum dorem dorem ipsum ipsum dorem dorem ipsum ipsum dorem dorem ipsum ipsum dorem dorem ipsum ipsum dorem dorem ipsum ipsum dorem dorem ipsum ipsum 1.2 Cíl projektu Vytvoit praktické nástroje (valuaní modely), které umoní a) z dat o cenách trních statk (zde nemovitostí) pípadn z dalích dat, odhadnout uitnou hodnotu veejných statk, zejména veejné vybavenosti, veejných prostranství a veejné infrastruktury, které nejsou trhem pímo ocenné; b) odhadnout dopad pipravovaných veejných i soukromých zámr na cenu residenních, pípadn i komerních nemovitostí. Dalím cílem projektu bude provit moná vyuití valuaních model v procesu územního plánování a územního rozhodování a ex-ante posuzování proveditelnosti rozvojových zámr na území praského metropolitního regionu, a také v odborném vzdlávání. více se dozvíte zde 1.3 Pouitá data Pouili jsme nap.: data 1 SÚ data 2 Deloitte data 3 XXX data 4 XXX data 5 XXX data 6 XXX Preview book (pozstatek) As you work, you may start a local server to live preview this HTML book. This preview will update as you edit the book when you save individual .Rmd files. You can start the server in a work session by using the RStudio add-in Preview book, or from the R console: library(bookdown) preview_chapter() library(bookdown) serve_book(dir = &quot;.&quot;, output_dir = &quot;_book&quot;, preview = TRUE, in_session = TRUE, quiet = FALSE) "],["metoda-did-struný-úvod-do-teorie.html", "2 Metoda DID: struný úvod do teorie", " 2 Metoda DID: struný úvod do teorie Metody Diff-in-Diff se vyuívají na mení efekt intervencí, kdy je bu vytvoen nový veejný statek nebo je stávající veejný statek upraven. Proto jsou ceny nemovitostí v experimentální a kontrolní skupin porovnávané ve dvou asových bodech  tsn ped intervencí a tsn po intervenci, viz. graf .1 níe. Graf .XXX. Odhad efektu intervence metodou Diff-in-Diff. Odhad kauzálního efektu metodou Diff-in-Diff je postaven na pedpokladu, e ob srovnávané skupiny mly ped intervencí shodný trend cen, a e tento trend by zstal stejný i po intervenci v pípad, e by daná intervence nebyla realizována. Pokud je pedpoklad shodné trendu splnn, potom statisticky významná odchylka v cenách nemovitostí v experimentální a kontrolní skupin po intervenci prokazuje efekt intervence. Formáln meme hedonickou cenu daného statku vyjádit koeficientem _1 v následující regresní funkci, kde p_i je cena nemovitosti i, D binární promnná píslunosti do experimentální skupiny, T binární promnná asového období po intervenci a _i odchylka modelované ceny od skutené ceny nemovitosti. \\(p_i=_0+ _1 (T*D)+_2 (T)+_3 (D)+ _i\\) Regresní analýza poskytuje bodový odhad koeficient funkce. Typickým píkladem intervence mené metodou Diff-in-Diff je realizace nové stanice metra. Efekt nov realizované stanice metra lze odvodit porovnáním mezních cen nemovitostí v okolí nové stanice (experimentální skupina) po její realizaci s ostatními nemovitostmi (kontrolní skupina) (Hanck 2011) "],["aplikace-metody-did-metro-a-deskriptivní-analýza.html", "3 Aplikace metody DID: Metro A [deskriptivní analýza] 3.1 Úvod 3.2 Úprava dat - rozklíování promnných s atributy 3.3 Przkum dat - poet pozorování okolo stanic A vs zbytek 3.4 Histogram cen 3.5 Pocet pozorovani", " 3 Aplikace metody DID: Metro A [deskriptivní analýza] 3.1 Úvod Modely micí pínos nových stanic linek metra byly pouity na datech k prodlouení linky metra A (rok uvedení do provozu 2015). Data k nájmm jsou sbírána za roky 2014 - 2020.Konkrétn se jedná o nemovitosti z okolí stanic: Boislavka, Nádraí Veleslavín, Petin a Motol. Experimentální a kontrolní skupiny byly vymezeny na principu vzdálenosti od nových stanic. Konkrétn byly specifikovány následujícím zpsobem: Experimentální (0-600m), Kontrolní (800-2000m) Experimentální (0-800m), Kontrolní (800-2000m) Experimentální (0-1000m), Kontrolní (1200-2000m) Skupiny byly zárove definovány tak, aby ádné pozorování nemohlo pipadnou souasn do experimentální a kontrolní skupiny, ale ani do dvou kontrolních skupin souasn. K nájmm (v datasetu vedeno jako promnná cena) byly pipojeny data o atributech rodinných dom a byt (typ obydlí reprezentuje promnná typ: 0 = rodinný dm, 1 = byt) a dále byla vytvoena kvartální promnná asu. Klíové jsou pedevím binární promnné pred_po (0 = pozorování se nachází v období ped intervencí, 1 = pozorování se nachází po intervenci) vytvoená rozdílem promnných rok_nájmu - rok_projektu, promnná nova_stara (0 = pozorování patí do kontrolní skupiny, 1 = pozorování patí do experimentální skupiny), íslo pipojené k promnné nova_stara (napíklad nova_stara_100) pak znaí zpsob definování experimentální skupiny. Interakcí tchto dvou promnných následn vznikla hlavní diff-in-diff promnná pred_po*nova_stara mící efekt intervence. 3.2 Úprava dat - rozklíování promnných s atributy if(exists(&quot;bit_mask&quot;)){rm(bit_mask)} for(a1 in c(0,1)){ for(a2 in c(0,1)){ for(a4 in c(0,1)){ for(a8 in c(0,1)){ for(a16 in c(0,1)){ for(a32 in c(0,1)){ for(a64 in c(0,1)){ for(a128 in c(0,1)){ bit_mask_temp &lt;- data.frame(1*a1 + 2*a2 + 4*a4 + 8*a8 + 16*a16 + 32*a32 + 64*a64 + 128*a128, a1,a2,a4,a8,a16,a32,a64,a128) if(!exists(&quot;bit_mask&quot;)){ bit_mask &lt;- bit_mask_temp }else{ bit_mask &lt;- rbind(bit_mask, bit_mask_temp) } } } } } } } } } rm(a1, a2, a4, a8, a16, a32, a64, a128, bit_mask_temp) colnames(bit_mask) &lt;- c(&quot;bit&quot;, &quot;balcony&quot;, &quot;parking_space&quot;, &quot;equiped&quot;, &quot;loggia&quot;, &quot;elevator&quot;, &quot;barrier_free&quot;, &quot;garage&quot;, &quot;terrace&quot;) dt_metro_najmy &lt;- merge(dt_metro_najmy, bit_mask, by.x = &quot;atributy&quot;, by.y = &quot;bit&quot;) # uprava promennych s charakteristikami dt_metro_najmy_temp&lt;-as.data.frame(sapply(dt_metro_najmy[,7:14],as.character)) dt_metro_najmy[,7:14] &lt;- dt_metro_najmy_temp ## Tvorba binarni promenne indikujici experimentalni = 1, kontrolni = 0 skupinu. dt_metro_najmy&lt;-dt_metro_najmy%&gt;% mutate(nova_stara_600 = ifelse(ToBreak&gt;0.6, 0,1)) %&gt;% mutate(nova_stara_800 = ifelse(ToBreak&gt;0.8, 0,1)) %&gt;% mutate(nova_stara_1000 = ifelse(ToBreak&gt;1, 0,1)) %&gt;% mutate(nova_stara = ifelse(rok_projekt == 2015, 1, 0))%&gt;% # Additional - not used mutate(cena_trend = rok_najem - rok_projekt)%&gt;% # promenna urcena k vykresleni trendu mutate(pred_po = rok_najem - rok_projekt)%&gt;% filter(pred_po &lt; 0 | pred_po &gt; 0 )%&gt;% mutate(pred_po = ifelse(pred_po &gt; 0, 1, 0)) %&gt;% filter(NAZEV != &quot;Motol - vestibul&quot;) %&gt;% # Filter out pozorovani z motola filter(stavobjekt != &quot;51&quot;) %&gt;% # smazani nemovitosti v projektove fazi filter(stavobjekt != &quot;60&quot;) # smazani nemovitosti ve vystavbe ## Uprava dalsich promennych - atributu budov a lokalit dt_metro_najmy&lt;-dt_metro_najmy %&gt;% mutate(budova = ifelse(budova == &quot;45&quot;, 1, 0)) ## Rozklicovani promennych dt_metro_najmy&lt;-dt_metro_najmy%&gt;% mutate(vlastnictv = ifelse(vlastnictv == &quot;61&quot;, &quot;Osobni&quot;, ifelse(vlastnictv == &quot;62&quot;,&quot;Druzstevni&quot;, ifelse(vlastnictv == &quot;63&quot;, &quot;Jine&quot;, ifelse(vlastnictv == &quot;78&quot;,&quot;Obecni&quot;, &quot;NA&quot;)))))%&gt;% mutate(stavobjekt = ifelse(stavobjekt ==&quot;52&quot;, &quot;Po rekonstrukci&quot;, ifelse(stavobjekt == &quot;53&quot;, &quot;Dobry&quot;, ifelse(stavobjekt == &quot;54&quot;, &quot;Velmi dobry&quot;, ifelse(stavobjekt ==&quot;55&quot;,&quot;Pred rekonstrukci&quot;, ifelse(stavobjekt == &quot;56&quot;,&quot;Novostavba&quot;, ifelse(stavobjekt == &quot;58&quot;,&quot;Spatny&quot;, ifelse(stavobjekt == &quot;59&quot;,&quot;K demolici&quot;, &quot;NA&quot;)))))))) dt_metro_najmy&lt;-dt_metro_najmy%&gt;% mutate(stavobjekt = as.factor(stavobjekt)) %&gt;% mutate(vlastnictv = as.factor(vlastnictv)) # Uprava promenych dt_metro_najmy&lt;-dt_metro_najmy%&gt;% mutate(plochauzit = as.numeric(plochauzit)) %&gt;% mutate(typ = ifelse(typ == &quot;byt&quot;, 1,0)) %&gt;% # pro byt = 1, pro RD = 0 mutate(stanice = as.factor(NAZEV)) V datasetu je vytvoená kvadrální promnná a je vytvoen subset s transakcemi v okolí nové linky metra. kvartal = function(dt) { d = substr(dt, 1, 10) d1 = date(d) m = month(d1) y = year(d1) d2 = case_when( m %in% c(1,2,3) ~ &quot;Q1&quot;, m %in% c(4,5,6) ~ &quot;Q2&quot;, m %in% c(7,8,9) ~ &quot;Q3&quot;, m %in% c(10,11,12) ~ &quot;Q4&quot;, TRUE ~ &quot;F&quot; ) d3 = paste(y, d2, sep = &quot;&quot;) return(d3) } dt_metro_najmy = dt_metro_najmy %&gt;% dplyr::mutate(qq = kvartal(lastfound_)) # Vytvoreni datasetu distance dt_metro_najmy_dist&lt;-subset(dt_metro_najmy, NAZEV == &quot;Boislavka - Horomická&quot; | NAZEV == &quot;Veleslavín - vestibul&quot; | NAZEV == &quot;Petiny - vestibul&quot; | NAZEV == &quot;Boislavka - Arabská&quot; ) 3.3 Przkum dat - poet pozorování okolo stanic A vs zbytek 3.4 Histogram cen ggplot(dt_metro_najmy, aes(x = cena))+ geom_histogram(breaks = seq(0,70000, by = 100)) ggplot(dt_metro_najmy, aes(x = log(cena)))+ geom_histogram(breaks = seq(7,14, by = 0.05)) 3.5 Pocet pozorovani # Skupiny pozorovani do 2km obs&lt;-c(nrow(filter(dt_metro_najmy_dist, nova_stara_600 == 1 )), mean(filter(dt_metro_najmy_dist, nova_stara_600 == 1 )$cena), nrow(filter(dt_metro_najmy_dist, nova_stara_600 == 0 )), mean(filter(dt_metro_najmy_dist, nova_stara_600 == 0 )$cena), nrow(filter(dt_metro_najmy_dist, nova_stara_800 == 1 )), mean(filter(dt_metro_najmy_dist, nova_stara_800 == 1 )$cena), nrow(filter(dt_metro_najmy_dist, nova_stara_800 == 0 )), mean(filter(dt_metro_najmy_dist, nova_stara_800 == 0 )$cena), nrow(filter(dt_metro_najmy_dist, nova_stara_1000 == 1 )), mean(filter(dt_metro_najmy_dist, nova_stara_1000 == 1 )$cena), nrow(filter(dt_metro_najmy_dist, nova_stara_1000 == 0 )), mean(filter(dt_metro_najmy_dist, nova_stara_1000 == 0 )$cena)) cols&lt;-c(&quot;Poet pozorování exp. skup.&quot;,&quot;Prmrná cena&quot;, &quot;Poet pozorování kont. skup.&quot;,&quot;Prmrná cena&quot;) rows&lt;-c(&quot;600 m&quot;,&quot;800 m&quot;,&quot;1000 m&quot;) obs_temp&lt;-matrix(obs, nrow = 3,ncol = 4, dimnames = list(rows,cols),byrow = TRUE) kable(obs_temp, caption = &quot;Poet pozorování podle skupiny&quot;, align=rep(&#39;c&#39;, 5)) Table 3.1: Poet pozorování podle skupiny Poet pozorování exp. skup. Prmrná cena Poet pozorování kont. skup. Prmrná cena 600 m 4053 16314.08 3729 19957.91 800 m 4626 16556.55 3156 20264.06 1000 m 5039 16822.02 2743 20334.62 3.5.1 Prostorové zobrazení dat dt_metro_sf_temp&lt;-dt_metro_najmy_dist[,c(&quot;X&quot;,&quot;Y&quot;,&quot;nova_stara_600&quot;)] metro_najmy_sf&lt;-st_as_sf(dt_metro_najmy_dist, coords = c(&quot;X&quot;,&quot;Y&quot;), crs = 5514, agr = &quot;constant&quot;) metro_najmy_sf$skupina = case_when( metro_najmy_sf$nova_stara_600 == 1 ~ &quot;experimentální&quot;, metro_najmy_sf$nova_stara_600 == 0 ~ &quot;kontrolní&quot;) tmap_mode(&quot;view&quot;) tm_shape(metro_najmy_sf) + tm_bubbles(col = &quot;nova_stara_600&quot;, scale = 0.01) + tm_view(set.view = c(14.3528789, 50.0931344, 12)) 3.5.2 Cenové trendy ## Metro: Distance ceny_summary_dist_600&lt;-dt_metro_najmy_dist%&gt;% group_by(cena_trend,nova_stara_600)%&gt;% summarize(cena_prumer = mean(cena)) ceny_summary_dist_800&lt;-dt_metro_najmy_dist%&gt;% group_by(cena_trend,nova_stara_800)%&gt;% summarize(cena_prumer = mean(cena)) ceny_summary_dist_1000&lt;-dt_metro_najmy_dist%&gt;% group_by(cena_trend,nova_stara_1000)%&gt;% summarize(cena_prumer = mean(cena)) ceny_summary&lt;-ceny_summary_dist_600 ceny_summary$cena_prumer_800&lt;-ceny_summary_dist_800$cena_prumer ceny_summary$cena_prumer_1000&lt;-ceny_summary_dist_1000$cena_prumer colnames(ceny_summary)&lt;-c(&quot;pred_po&quot;,&quot;nova_stara&quot;,&quot;cena_prumer_600&quot;,&quot;cena_prumer_800&quot;,&quot;cena_prumer_1000&quot;) #ceny_summary_distance$ceny_index&lt;-0 #for (i in 1:nrow(ceny_summary_distance)) { # ceny_summary_distance$ceny_index[i]&lt;-ifelse(ceny_summary_distance$nova_stara_600[i]==0, ceny_summary_distance$cena_prumer[i] / # ceny_summary_distance$cena_prumer[1],ceny_summary_distance$cena_prumer[i] / ceny_summary_distance$cena_prumer[2]) #} #ceny_summary_distance&lt;-ceny_summary_distance%&gt;% # mutate(ceny_index = (ceny_index - 1)*100) ## Graf cen pro skupiny Distance: 600, 800, 1000 theme_set(theme_bw()) gg_cena_prumer_distance&lt;-ggplot()+ geom_line(ceny_summary_dist_600, mapping = aes(x=cena_trend, y = cena_prumer, group = as.factor(nova_stara_600), colour = as.factor(nova_stara_600)))+ geom_line(ceny_summary_dist_800, mapping = aes(x=cena_trend, y = cena_prumer, group = as.factor(nova_stara_800), colour = as.factor(nova_stara_800))) + geom_line(ceny_summary_dist_1000, mapping = aes(x=cena_trend, y = cena_prumer, group = as.factor(nova_stara_1000), colour = as.factor(nova_stara_1000)))+ scale_x_continuous(breaks = ceny_summary_dist_600$cena_trend)+ scale_color_manual(name = &quot;Skupina&quot;, labels = c(&quot;Kontrolní skupina&quot;,&quot;Experimentální skupina&quot;), values = c(&quot;darkblue&quot;,&quot;red&quot;))+ # theme(axis.text.x = element_text(angle = 60))+ ylab(&quot;Prmrné ceny&quot;)+ xlab(&quot;Rok&quot;)+ labs(title = &quot;Vývoj prmrných cen dle skupin v ase&quot;) gg_cena_prumer_distance "],["footnotes-and-citations.html", "4 Footnotes and citations 4.1 Footnotes 4.2 Citations", " 4 Footnotes and citations 4.1 Footnotes Footnotes are put inside the square brackets after a caret ^[]. Like this one 1. 4.2 Citations Reference items in your bibliography file(s) using @key. For example, we are using the bookdown package (Xie 2022) (check out the last code chunk in index.Rmd to see how this citation key was added) in this sample book, which was built on top of R Markdown and knitr (Xie 2015) (this citation was added manually in an external file book.bib). Note that the .bib files need to be listed in the index.Rmd with the YAML bibliography key. The RStudio Visual Markdown Editor can also make it easier to insert citations: https://rstudio.github.io/visual-markdown-editing/#/citations References "],["blocks.html", "5 Blocks 5.1 Equations 5.2 Theorems and proofs 5.3 Callout blocks", " 5 Blocks 5.1 Equations Here is an equation. \\[\\begin{equation} f\\left(k\\right) = \\binom{n}{k} p^k\\left(1-p\\right)^{n-k} \\tag{5.1} \\end{equation}\\] You may refer to using \\@ref(eq:binom), like see Equation (5.1). 5.2 Theorems and proofs Labeled theorems can be referenced in text using \\@ref(thm:tri), for example, check out this smart theorem 5.1. Theorem 5.1 For a right triangle, if \\(c\\) denotes the length of the hypotenuse and \\(a\\) and \\(b\\) denote the lengths of the other two sides, we have \\[a^2 + b^2 = c^2\\] Read more here https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html. 5.3 Callout blocks The R Markdown Cookbook provides more help on how to use custom blocks to design your own callouts: https://bookdown.org/yihui/rmarkdown-cookbook/custom-blocks.html "],["sharing-your-book.html", "6 Sharing your book 6.1 Publishing 6.2 404 pages 6.3 Metadata for sharing", " 6 Sharing your book 6.1 Publishing HTML books can be published online, see: https://bookdown.org/yihui/bookdown/publishing.html 6.2 404 pages By default, users will be directed to a 404 page if they try to access a webpage that cannot be found. If youd like to customize your 404 page instead of using the default, you may add either a _404.Rmd or _404.md file to your project root and use code and/or Markdown syntax. 6.3 Metadata for sharing Bookdown HTML books will provide HTML metadata for social sharing on platforms like Twitter, Facebook, and LinkedIn, using information you provide in the index.Rmd YAML. To setup, set the url for your book and the path to your cover-image file. Your books title and description are also used. This gitbook uses the same social sharing data across all chapters in your book- all links shared will look the same. Specify your books source repository on GitHub using the edit key under the configuration options in the _output.yml file, which allows users to suggest an edit by linking to a chapters source file. Read more about the features of this output format here: https://pkgs.rstudio.com/bookdown/reference/gitbook.html Or use: ?bookdown::gitbook "],["references.html", "References", " References "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
